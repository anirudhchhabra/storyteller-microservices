---
spring:
  zipkin:
    base-url: http://192.168.99.100:8080/
  application:
    name: storyteller-api
  profiles: storyteller-api1
  cloud:
    config:
      discovery:
        enabled: true
      failFast: true
      retry:
        maxAttempts: 100
        initialInterval: 2000
        maxInterval: 3000
        multiplier: 1.5
  rabbitmq:
    host: my-rabbit
    port: 5672
    username: guest
    password: guest   

server:
  port: 9977

eureka:
  instance:
    hostname: storyteller-api
  client:
    serviceUrl:
      defaultZone: http://archimedes1:8761/eureka/,http://archimedes2:8762/eureka/
#   registerWithEureka: false
  
hystrix:
  command:
    getStory:
      execution:
        isolation:
          thread:
            timeoutInMilliseconds: 10000 
    getImage:
      execution:
        isolation:
          thread:
            timeoutInMilliseconds: 10000
  threadpool:
    default:
      coreSize: 50                                

stories-microservice:
  ribbon:
    ConnectTimeout: 250
    OkToRetryOnAllOperations: true
    MaxAutoRetriesNextServer: 2
    MaxAutoRetries: 1   

images-microservice:
  ribbon:
    ConnectTimeout: 250
    OkToRetryOnAllOperations: true
    MaxAutoRetriesNextServer: 2
    MaxAutoRetries: 1               
  
logging:
#   file: /var/memento/security.log
  level:
    org.springframework.cloud.sleuth: 'DEBUG'
---
spring:
  zipkin:
    base-url: http://192.168.99.100:8080/
  application:
    name: storyteller-api
  profiles: storyteller-api2
  cloud:
    config:
      uri: http://config-server:8888
      discovery:
        enabled: true
      failFast: true
      retry:
        maxAttempts: 100
        initialInterval: 2000
        maxInterval: 3000
        multiplier: 1.5
  rabbitmq:
    host: my-rabbit
    port: 5672
    username: guest
    password: guest   
    
server:
  port: 7799

eureka:
  instance:
    hostname: storyteller-api
  client:
    serviceUrl:
      defaultZone: http://archimedes1:8761/eureka/,http://archimedes2:8762/eureka/
#   registerWithEureka: false
  
hystrix:
  command:
    getStory:
      execution:
        isolation:
          thread:
            timeoutInMilliseconds: 10000 
    getImage:
      execution:
        isolation:
          thread:
            timeoutInMilliseconds: 10000
  threadpool:
    default:
      coreSize: 50                   

stories-microservice:
  ribbon:
    ConnectTimeout: 250
    OkToRetryOnAllOperations: true
    MaxAutoRetriesNextServer: 2
    MaxAutoRetries: 1   

images-microservice:
  ribbon:
    ConnectTimeout: 250
    OkToRetryOnAllOperations: true
    MaxAutoRetriesNextServer: 2
    MaxAutoRetries: 1    
    
logging:
#   file: /var/memento/security.log
  level:
    org.springframework.cloud.sleuth: 'DEBUG'